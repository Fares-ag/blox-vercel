/**
 * Nationality utility functions for extracting nationality from QID (Qatar ID)
 * QID format: 11 digits where positions 4-6 (0-indexed: 3-5) contain the country code
 * Example: 29881897456 - positions 4-6 are "818" which is Egypt
 */

export const COUNTRY_CODE_MAP: Record<string, string> = {
  '004': 'Afghanistan',
  '008': 'Albania',
  '012': 'Algeria',
  '016': 'American Samoa',
  '020': 'Andorra',
  '028': 'Antigua & Barbuda',
  '031': 'Azerbaijan',
  '032': 'Argentina',
  '036': 'Australia',
  '040': 'Austria',
  '044': 'Bahamas',
  '048': 'Bahrain',
  '050': 'Bangladesh',
  '051': 'Armenia',
  '052': 'Barbados',
  '056': 'Belgium',
  '058': 'Luxembourg',
  '060': 'Bermuda',
  '064': 'Bhutan',
  '068': 'Bolivia',
  '070': 'Bosnia and Herzegovina',
  '072': 'Botswana',
  '076': 'Brazil',
  '084': 'Belize',
  '086': 'British Indian Ocean Tertiary',
  '090': 'Solomon Islands',
  '092': 'British Virgin Islands',
  '096': 'Brunei',
  '100': 'Bulgaria',
  '104': 'Myanmar',
  '108': 'Burundi',
  '112': 'Belarus',
  '116': 'Cambodia',
  '120': 'Cameroon',
  '124': 'Canada',
  '132': 'Cape Verde',
  '136': 'Cayman Islands',
  '140': 'Central African Republic',
  '144': 'Srilanka',
  '148': 'Chad',
  '152': 'Chile',
  '156': 'China',
  '158': 'Taiwan',
  '162': 'Christmas Island',
  '166': 'Coco Island',
  '170': 'Colombia',
  '174': 'Comoros',
  '188': 'Costa Rica',
  '191': 'Croatia',
  '192': 'Cuba',
  '196': 'Cyprus',
  '200': 'Czechoslovakia',
  '203': 'Czech Republic',
  '204': 'Benin',
  '208': 'Denmark',
  '212': 'Dominica',
  '214': 'Dominican Republic',
  '218': 'Ecuador',
  '222': 'El Salvador',
  '226': 'Equatorial Guinea',
  '230': 'Ethiopia (Includes Eritrea)',
  '231': 'Ehiopia (Exclude Eritrea)',
  '232': 'Eritrea',
  '233': 'Estonia',
  '234': 'Faeroe Island',
  '238': 'Falkland Island',
  '242': 'Fiji',
  '246': 'Finland',
  '250': 'France',
  '254': 'Cote d\'Ivoire',
  '258': 'French Polynesia',
  '260': 'Fr. So. Ant. Tr',
  '262': 'Djibouti',
  '266': 'Gabon',
  '268': 'Georgia',
  '270': 'Gambia',
  '274': 'Gaza Strip',
  '276': 'Germany',
  '278': 'German Democratic Republic',
  '288': 'Ghana',
  '292': 'Gibraltar',
  '296': 'Kiribati',
  '300': 'Greece',
  '304': 'Greenland',
  '308': 'Grenada',
  '312': 'Guadeloupe',
  '316': 'Guam',
  '320': 'Guatemala',
  '324': 'Guinea',
  '328': 'Guyana',
  '332': 'Haiti',
  '336': 'Holy See',
  '340': 'Honduras',
  '344': 'Hong Kong',
  '348': 'Hungary',
  '352': 'Iceland',
  '356': 'India',
  '360': 'Indonesia',
  '364': 'Iran',
  '368': 'Iraq',
  '372': 'Ireland',
  '376': 'Israel',
  '380': 'Italy',
  '384': 'Anguilla',
  '388': 'Jamaica',
  '392': 'Japan',
  '396': 'Jhonston Island',
  '398': 'Kazakhstan',
  '400': 'Jordan',
  '404': 'Kenya',
  '408': 'Korea Democratic Republic',
  '410': 'Koria Republic',
  '414': 'Kuwait',
  '417': 'Kyrgyz Republic',
  '418': 'Lao PDR',
  '422': 'Lebanon',
  '426': 'Lesotho',
  '428': 'Latvia',
  '430': 'Liberia',
  '434': 'Libya',
  '438': 'Liechtenstein',
  '440': 'Lithuania',
  '442': 'Luxembourg',
  '446': 'Macao',
  '450': 'Madagascar',
  '454': 'Malawi',
  '457': 'Sarawak',
  '458': 'Malaysia',
  '459': 'Pen Malaysia',
  '461': 'Sabah',
  '462': 'Maldives',
  '466': 'Mali',
  '470': 'Malta',
  '474': 'Martinique',
  '478': 'Mauritania',
  '480': 'Mauritius',
  '484': 'Mexico',
  '488': 'Midway Island',
  '492': 'Monaco',
  '496': 'Mongolia',
  '498': 'Moldova',
  '500': 'Montserrat',
  '504': 'Morocco',
  '508': 'Mozambique',
  '512': 'Oman',
  '516': 'Namibia',
  '520': 'Nauru',
  '524': 'Nepal',
  '528': 'Netherlands',
  '530': 'Netherlands Antilles',
  '533': 'Aruba',
  '536': 'Neutral Zone',
  '540': 'New Caledonia',
  '548': 'Vanuatu',
  '554': 'New Zealand',
  '558': 'Nicaragua',
  '562': 'Niger',
  '566': 'Nigeria',
  '570': 'Niue',
  '574': 'Norfolk Island',
  '578': 'Norway',
  '580': 'Northern Mariana Islands',
  '582': 'Pacific Islands',
  '583': 'Micronesia',
  '584': 'Marshall Islands',
  '585': 'Palau',
  '586': 'Pakistan',
  '591': 'Panama',
  '592': 'Fm Panama Cz',
  '598': 'Papua New Guinea',
  '600': 'Paraguay',
  '604': 'Peru',
  '608': 'Philipines',
  '612': 'Pitcairn',
  '616': 'Poland',
  '620': 'Portugal',
  '624': 'Guinea Bissau',
  '626': 'East Timor',
  '630': 'Puerto Rico',
  '634': 'Qatar',
  '638': 'Reunion',
  '642': 'Romania',
  '643': 'Russian Federation',
  '646': 'Rwanda',
  '647': 'Ryuku Is',
  '660': 'Anguila',
  '658': 'Saint Kitts Nevis Anguilla Aru',
  '662': 'Saint Lucia',
  '666': 'Saint Pierre and Miquelon',
  '670': 'Saint Vincent and the Grenadines',
  '674': 'San Marino',
  '678': 'Sao Tome and principe',
  '682': 'Saudia Arabia',
  '686': 'Senegal',
  '690': 'Seychelles',
  '694': 'Sierra Leone',
  '702': 'Singapore',
  '703': 'Slovak Republic',
  '704': 'Vietnam',
  '705': 'Slovenia',
  '706': 'Somalia',
  '710': 'South Africa',
  '716': 'Zimbabwe',
  '717': 'Fm Rhod Nyas',
  '720': 'Yemon Democratic',
  '724': 'Spain',
  '732': 'Western Sahara',
  '736': 'Sudan',
  '740': 'Suriname',
  '752': 'Sweden',
  '756': 'Switzerland',
  '760': 'Syrian',
  '762': 'Tajikistan',
  '764': 'Thailand',
  '768': 'Togo',
  '772': 'Tokelau',
  '776': 'Tonga',
  '780': 'Trinidad and Tobago',
  '784': 'United Arab Emirates',
  '788': 'Tunisia',
  '792': 'Turkey',
  '795': 'Turkmenistan',
  '798': 'Tuvalu',
  '800': 'Uganda',
  '804': 'Ukraine',
  '807': 'Macedonia',
  '810': 'Soviet Union',
  '818': 'Egypt',
  '826': 'United Kingdom',
  '834': 'Tanzania',
  '835': 'Fm Tanganyik',
  '836': 'Fm Zanz-Pemb',
  '838': 'Free Zones',
  '839': 'Special Categories',
  '840': 'United States',
  '850': 'Virgin Islands',
  '854': 'Burkina Faso',
  '858': 'Uraguay',
  '860': 'Uzbekistan',
  '862': 'Vanezuela',
  '866': 'Fm Vietnam Rp',
  '868': 'Fm Vietnam Dr',
  '872': 'Wake Island',
  '876': 'Wallis and Futura Isl.',
  '882': 'Samoa',
  '898': 'Unspecified',
  '918': 'European Union',
};

/**
 * Extracts nationality from QID (Qatar ID) number
 * @param qid - 11-digit QID number
 * @returns Country name or null if code not found
 */
export const getNationalityFromQID = (qid: string): string | null => {
  if (!qid || qid.length < 11) {
    return null;
  }

  // Extract country code from positions 4-6 (0-indexed: 3-5)
  const countryCode = qid.substring(3, 6);
  return COUNTRY_CODE_MAP[countryCode] || null;
};

/**
 * Gets the country code from QID
 * @param qid - 11-digit QID number
 * @returns 3-digit country code or null
 */
export const getCountryCodeFromQID = (qid: string): string | null => {
  if (!qid || qid.length < 11) {
    return null;
  }
  return qid.substring(3, 6);
};

/**
 * Gets all available nationalities as options for select dropdowns
 * @returns Array of { value, label } objects sorted alphabetically
 */
export const getAllNationalityOptions = (): Array<{ value: string; label: string }> => {
  const nationalities = Object.values(COUNTRY_CODE_MAP)
    .filter((country, index, self) => self.indexOf(country) === index) // Remove duplicates
    .sort()
    .map(country => ({
      value: country.toLowerCase().replace(/\s+/g, '-').replace(/[()]/g, ''),
      label: country,
    }));
  
  return nationalities;
};

